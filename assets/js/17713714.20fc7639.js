"use strict";(globalThis.webpackChunkyarnl_docs=globalThis.webpackChunkyarnl_docs||[]).push([[9418],{5533(e,r,s){s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"guide/data-structure","title":"Data Structure","description":"How Yarnl organizes and stores your data","source":"@site/docs/guide/data-structure.md","sourceDirName":"guide","slug":"/guide/data-structure","permalink":"/docs/guide/data-structure","draft":false,"unlisted":false,"editUrl":"https://github.com/titandrive/yarnl-docs/tree/main/docs/guide/data-structure.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"Data Structure","description":"How Yarnl organizes and stores your data"},"sidebar":"tutorialSidebar","previous":{"title":"Archive","permalink":"/docs/guide/archive"},"next":{"title":"Markdown","permalink":"/docs/guide/markdown"}}');var n=s(4848),a=s(8453);const d={sidebar_position:7,title:"Data Structure",description:"How Yarnl organizes and stores your data"},i="Data Structure",l={},c=[{value:"Docker Volume",id:"docker-volume",level:2},{value:"Folder Structure",id:"folder-structure",level:2},{value:"Database",id:"database",level:2},{value:"Per-User Data",id:"per-user-data",level:2},{value:"Patterns",id:"patterns",level:3},{value:"Archive",id:"archive",level:3},{value:"Backups",id:"backups",level:3},{value:"Notes",id:"notes",level:3},{value:"Admin Backups",id:"admin-backups",level:2}];function o(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"data-structure",children:"Data Structure"})}),"\n",(0,n.jsx)(r.p,{children:"Understand how Yarnl organizes your data and where everything is stored."}),"\n",(0,n.jsx)(r.p,{children:"Yarnl stores everything in simple, portable formats. No proprietary databases. No cloud lock-in. Your data is always accessible and always yours."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"docker-volume",children:"Docker Volume"}),"\n",(0,n.jsx)(r.p,{children:"Yarnl uses a single mounted volume for all user data:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"volumes:\n  - ./users:/app/users\n"})}),"\n",(0,n.jsx)(r.p,{children:"All patterns, archives, backups, and notes are stored within this directory, organized per user."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"folder-structure",children:"Folder Structure"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"users/\n\u251c\u2500\u2500 [username]/\n\u2502   \u251c\u2500\u2500 patterns/\n\u2502   \u2502   \u251c\u2500\u2500 [category]/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 pattern-file.pdf\n\u2502   \u2502   \u251c\u2500\u2500 thumbnails/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 thumb-*.jpg\n\u2502   \u2502   \u2514\u2500\u2500 images/\n\u2502   \u2502       \u2514\u2500\u2500 *.jpg\n\u2502   \u251c\u2500\u2500 archive/\n\u2502   \u2502   \u251c\u2500\u2500 [category]/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 archived-file.pdf\n\u2502   \u2502   \u2514\u2500\u2500 thumbnails/\n\u2502   \u2502       \u2514\u2500\u2500 thumb-*.jpg\n\u2502   \u251c\u2500\u2500 backups/\n\u2502   \u2502   \u2514\u2500\u2500 yarnl-backup-*.zip\n\u2502   \u2514\u2500\u2500 notes/\n\u2502       \u2514\u2500\u2500 pattern-slug.md\n\u2514\u2500\u2500 [another-user]/\n    \u2514\u2500\u2500 ...\n"})}),"\n",(0,n.jsx)(r.p,{children:"Each user has their own isolated directory containing all their data."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"database",children:"Database"}),"\n",(0,n.jsx)(r.p,{children:"Yarnl stores all metadata in a PostgreSQL database. The database is managed by Docker and includes:"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Data"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Users"}),(0,n.jsx)(r.td,{children:"Accounts, roles, auth methods"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Pattern info"}),(0,n.jsx)(r.td,{children:"Name, description, category, hashtags"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Status"}),(0,n.jsx)(r.td,{children:"Favorite, current, completed, completion date"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Counters"}),(0,n.jsx)(r.td,{children:"Row count, stitch count, and custom counters"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Timer"}),(0,n.jsx)(r.td,{children:"Time spent on each project"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"PDF position"}),(0,n.jsx)(r.td,{children:"Last viewed page"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Categories"}),(0,n.jsx)(r.td,{children:"Category names and display order"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Hashtags"}),(0,n.jsx)(r.td,{children:"Hashtag names and display order"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Settings"}),(0,n.jsx)(r.td,{children:"User and system preferences"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"OIDC config"}),(0,n.jsx)(r.td,{children:"SSO provider settings"})]})]})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"per-user-data",children:"Per-User Data"}),"\n",(0,n.jsx)(r.h3,{id:"patterns",children:"Patterns"}),"\n",(0,n.jsx)(r.p,{children:"When you import patterns, Yarnl organizes them by category:"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Category"}),(0,n.jsx)(r.th,{children:"Location"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Amigurumi"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"users/[username]/patterns/amigurumi/"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Wearables"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"users/[username]/patterns/wearables/"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Miscellaneous"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"users/[username]/patterns/other/"})})]})]})]}),"\n",(0,n.jsx)(r.p,{children:"Changing a pattern's category moves the file to the corresponding folder."}),"\n",(0,n.jsx)(r.h3,{id:"archive",children:"Archive"}),"\n",(0,n.jsx)(r.p,{children:"Archived patterns move to the user's archive folder instead of being permanently deleted:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Recover accidentally deleted patterns from ",(0,n.jsx)(r.strong,{children:"Settings \u2192 Archive"})]}),"\n",(0,n.jsx)(r.li,{children:"Patterns keep their metadata and counter values"}),"\n",(0,n.jsx)(r.li,{children:"Permanently delete from archive when you're sure"}),"\n"]}),"\n",(0,n.jsx)(r.h3,{id:"backups",children:"Backups"}),"\n",(0,n.jsxs)(r.p,{children:["User backups are stored in each user's backups folder. See ",(0,n.jsx)(r.a,{href:"./backups-and-data",children:"Backups & Data"})," for configuration."]}),"\n",(0,n.jsx)(r.h3,{id:"notes",children:"Notes"}),"\n",(0,n.jsx)(r.p,{children:"Markdown notes for patterns are stored as individual files, keyed by pattern slug."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"admin-backups",children:"Admin Backups"}),"\n",(0,n.jsx)(r.p,{children:"System-wide admin backups (available to admins only) include:"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Backup Type"}),(0,n.jsx)(r.th,{children:"Contents"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.strong,{children:"Configuration (JSON)"})}),(0,n.jsx)(r.td,{children:"All users, OIDC settings, categories, app settings"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.strong,{children:"User Data (ZIP)"})}),(0,n.jsx)(r.td,{children:"All pattern files and archives for all users"})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["These are used for migrating or recovering an entire Yarnl instance. See ",(0,n.jsx)(r.a,{href:"./users-and-authentication#admin-backup--restore",children:"Users & Authentication"})," for details."]})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},8453(e,r,s){s.d(r,{R:()=>d,x:()=>i});var t=s(6540);const n={},a=t.createContext(n);function d(e){const r=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),t.createElement(a.Provider,{value:r},e.children)}}}]);